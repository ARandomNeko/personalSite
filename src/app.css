@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');
@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@theme {
	/* Define a strict black and white palette */
	--color-black: #000000;
	--color-white: #ffffff;
	--color-light-gray: #cccccc;
	--color-medium-gray: #888888;
	--color-dark-gray: #444444;

	--font-mono: 'JetBrains Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas',
		'Liberation Mono', 'Courier New', monospace;
}

@theme inline {
	/* Light mode (mimicking the old monitor's light gray background) */
	--color-light-bg: var(--color-white);
	--color-light-tx: var(--color-black);
	--color-light-ui: var(--color-medium-gray);
	--color-light-border: var(--color-black);

	/* Dark mode (not explicitly in the image, but good to keep for consistency if needed) */
	--color-dark-bg: var(--color-black);
	--color-dark-tx: var(--color-white);
	--color-dark-ui: var(--color-dark-gray);
	--color-dark-border: var(--color-white);
}

/* Base theme variables - default to dark mode */
:root {
	--bg: var(--color-dark-bg);
	--tx: var(--color-dark-tx);
	--ui: var(--color-dark-ui);
	--border: var(--color-dark-border);
	--tx-1: var(--color-dark-tx);
	--tx-2: var(--color-medium-gray);
	--ui-3: var(--color-dark-ui);
	--cy: var(--color-light-gray);
	--re: var(--color-light-gray);

	/* Tag chip colors */
	--tag-bg: var(--color-dark-ui);
	--tag-tx: var(--color-light-gray);

	/* Dotted background pattern */
	--dot-color: var(--color-dark-gray);

	/* Grid unit for alignment */
	--grid: 12px;
}

/* Light mode class - switches to light theme */
.light-mode {
	--bg: var(--color-light-bg);
	--tx: var(--color-light-tx);
	--ui: var(--color-light-ui);
	--border: var(--color-light-border);
	--tx-1: var(--color-light-tx);
	--tx-2: var(--color-medium-gray);
	--ui-3: var(--color-light-ui);
	--cy: var(--color-dark-gray);
	--re: var(--color-dark-gray);
	--tag-bg: var(--color-light-gray);
	--tag-tx: var(--color-black);
	--dot-color: var(--color-medium-gray);
}

body {
	background-color: var(--bg);
	color: var(--tx);
	font-family: var(--font-mono);
	font-size: 18px;
	font-weight: 400;
	line-height: calc(var(--grid) * 2);
	/* Dither grid is drawn by the background component */
	background: none;
	margin: 0;
	padding: 0;
	width: 100dvw;
	height: 100dvh;
	overflow: hidden;
}

/* Align common text element spacing to the grid */
p { margin: 0 0 var(--grid) 0; }
h1, h2, h3, h4, h5, h6 { margin: var(--grid) 0 calc(var(--grid) * 0.5) 0; line-height: calc(var(--grid) * 2); }

/* Minimal button */
.btn {
	background-color: var(--bg);
	border: 1px solid var(--tx);
	color: var(--tx);
	padding: 6px 12px;
	font-size: 12px;
	cursor: pointer;
	transition: background-color 0.15s, color 0.15s;
	&:hover {
		background-color: var(--tx);
		color: var(--bg);
	}
}

/* Tag chip styling - uses CSS variables for theme support */
.tag {
	background-color: var(--tag-bg);
	color: var(--tag-tx);
	padding: 2px 8px;
	font-size: 11px;
	border-radius: 0;
}

/* Card styling */
.card {
	display: block;
	padding: var(--grid);
	border: 1px solid var(--ui-3);
	background-color: transparent;
	transition: border-color 0.15s, background-color 0.15s;
	&:hover {
		border-color: var(--tx);
		background-color: color-mix(in srgb, var(--tx) 5%, transparent);
	}
}

h1, h2, h3, h4, h5, h6, a {
	font-family: var(--font-mono);
	font-weight: 400;
	color: var(--tx);
}

p {
	font-family: var(--font-mono);
	color: var(--tx);
	font-weight: 400;
	font-size: 18px;
}

/* Theme toggle button styling */
.theme-toggle {
	display: inline-flex;
	align-items: center;
	position: relative;
	width: 40px;
	height: 20px;
	background: transparent;
	border: none;
	padding: 0;
	cursor: pointer;
}

.theme-toggle .slider {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--tx);
	transition: 0.3s;
	display: flex;
	align-items: center;
}

.theme-toggle .slider::before {
	content: '';
	height: 14px;
	width: 14px;
	margin-left: 3px;
	background-color: var(--bg);
	transition: 0.3s;
}

.theme-toggle .slider.checked::before {
	margin-left: 23px;
}

/* Ensure prose styles use theme variables */
.prose {
	--tw-prose-body: var(--tx);
	--tw-prose-headings: var(--tx);
	--tw-prose-lead: var(--tx);
	--tw-prose-links: var(--tx);
	--tw-prose-bold: var(--tx);
	--tw-prose-counters: var(--tx);
	--tw-prose-bullets: var(--tx);
	--tw-prose-hr: var(--border);
	--tw-prose-quotes: var(--tx);
	--tw-prose-quote-borders: var(--border);
	--tw-prose-captions: var(--tx);
	--tw-prose-code: var(--tx);
	--tw-prose-pre-code: var(--tx);
	--tw-prose-pre-bg: var(--ui);
	--tw-prose-th-borders: var(--border);
	--tw-prose-td-borders: var(--border);

	/* Dark mode prose variables - adjust if dark mode is implemented */
	--tw-prose-invert-body: var(--tx);
	--tw-prose-invert-headings: var(--tx);
	--tw-prose-invert-lead: var(--tx);
	--tw-prose-invert-links: var(--tx);
	--tw-prose-invert-bold: var(--tx);
	--tw-prose-invert-counters: var(--tx);
	--tw-prose-invert-bullets: var(--tx);
	--tw-prose-invert-hr: var(--border);
	--tw-prose-invert-quotes: var(--tx);
	--tw-prose-invert-quote-borders: var(--border);
	--tw-prose-invert-captions: var(--tx);
	--tw-prose-invert-code: var(--tx);
	--tw-prose-invert-pre-code: var(--tx);
	--tw-prose-invert-pre-bg: var(--ui);
	--tw-prose-invert-th-borders: var(--border);
	--tw-prose-invert-td-borders: var(--border);

	font-family: var(--font-mono);
	a {
		color: var(--tx);
		&:hover {
			text-decoration: underline;
		}
	}
	code {
		font-weight: normal;
		font-size: 0.9em;
		&::before, &::after {
			content: '';
		}
	}
	pre {
		border-radius: 0;
		border: 1px solid var(--border);
		code {
			font-size: 0.9em;
		}
	}
}

/* Staggered fade-in animation for editorial layout */
@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(12px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-fade-in {
	animation: fadeInUp 0.5s ease-out forwards;
	opacity: 0;
}

.animate-delay-1 { animation-delay: 0.1s; }
.animate-delay-2 { animation-delay: 0.2s; }
.animate-delay-3 { animation-delay: 0.3s; }
.animate-delay-4 { animation-delay: 0.4s; }
.animate-delay-5 { animation-delay: 0.5s; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
	.animate-fade-in {
		animation: none;
		opacity: 1;
	}
}
